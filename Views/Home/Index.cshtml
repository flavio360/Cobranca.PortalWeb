@model Cobranca.PortalWeb.Models.Login.LoginRequestViewModel;
@using System.Security.Claims;

@{
	var isAuthenticated = User.Identity.IsAuthenticated;

	string userId = null;
	string nome = null;
	string token = null;
	string tipoAcesso = null;
	string empresaId = null;

	if (isAuthenticated)
	{
		// Acessando as claims
		userId = User.FindFirst(ClaimTypes.NameIdentifier)?.Value;
		nome = User.FindFirst(ClaimTypes.Name)?.Value;
		token = User.FindFirst("Token")?.Value;
		tipoAcesso = User.FindFirst("TipoAcesso")?.Value;
		empresaId = User.FindFirst("EmpresaId")?.Value;
	}
}



	@*	<div id="container1" class="" style="margin-left: 4.5rem;padding-left: 20px; background-color:aquamarine">




@* --------------------------------------------------- *@
@* ---------------### MODAL ### ------------------- *@
@* --------------------------------------------------- *@

<div id="logoutModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5); z-index:1000;">
	<div style="background:#fff; margin:15% auto; padding:20px; width:300px; border-radius:5px; text-align:center;">
		<h4>Deseja encerrar a sessão?</h4>
		<button class="re_button" onclick="logout();" style="margin:5px;">Sim</button>
		<button class="re_button" onclick="closeModal();" style="margin:5px;">Não</button>
	</div>
</div>

@* --------------------------------------------------- *@
@* ---------------### SIDE BAR ### ------------------- *@
@* --------------------------------------------------- *@



<script>
	function openModal() {
		document.getElementById('logoutModal').style.display = 'block';
	}

	function closeModal() {
		document.getElementById('logoutModal').style.display = 'none';
	}

	function abrirModal(modalId) {
		// Oculta todos os modais
		document.querySelectorAll('.Re_DS_sidebar_menuBlue').forEach(modal => {
			modal.style.display = 'none';
		});
		// Exibe o modal selecionado
		document.getElementById(modalId).style.display = 'block';
	}
</script>
@*// ----------------------------------------------------------------------------------------------------------------------------*@
@* ---------------### LOGOUT   ### ------------------- *@
<script>
	function openModal() {
		document.getElementById('logoutModal').style.display = 'block';
	}

	function closeModal() {
		document.getElementById('logoutModal').style.display = 'none';
	}

	function logout() {
		localStorage.removeItem('userSession'); // Exemplo
		sessionStorage.clear(); // Limpa todas as sessões

		// Redirecionar para a rota Index do LoginController
		window.location.href = '/Login/Index';
	}
</script>
@*//----------------------------------------------------------------------------------------------------------------------------
 ---------------### Eventos de abertura e fechamento do sidebar da home.   ### ------------------- *@



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

@* <script>
	(function () {
	  // Abre apenas a lista pedida e fecha as outras
	  function abrirSidebar(id) {
		const all = document.querySelectorAll('.SideBar');
		all.forEach(el => el.style.display = 'none');

		const target = document.getElementById(id);
		if (target) {
		  target.style.display = 'block';
		  target.scrollTop = 0;
		  window.sidebarAberta = target;
		  // acessibilidade
		  const btn = document.querySelector('[data-sidebar-target="'+id+'"]');
		  if (btn) btn.setAttribute('aria-expanded', 'true');
		}
	  }

	  function fecharSidebars() {
		document.querySelectorAll('.SideBar').forEach(s => s.style.display = 'none');
		document.querySelectorAll('[data-sidebar-target][aria-expanded="true"]').forEach(b=>b.setAttribute('aria-expanded','false'));
		window.sidebarAberta = null;
	  }

	  // Clique nos ícones rotulados com data-sidebar-target
	  document.addEventListener('click', function (e) {
		const btn = e.target.closest('[data-sidebar-target]');
		if (!btn) return;

		e.preventDefault();
		const id = btn.getAttribute('data-sidebar-target');

		if (window.sidebarAberta && window.sidebarAberta.id === id) {
		  fecharSidebars(); // toggle: se já estava aberta, fecha
		  return;
		}
		abrirSidebar(id);
	  });

	  // ESC fecha
	  document.addEventListener('keydown', function (e) {
		if (e.key === 'Escape') fecharSidebars();
	  });

	  // expõe se quiser chamar por onclick legado:
	  window.abrirSidebar = abrirSidebar;
	  window.fecharSidebars = fecharSidebars;
	})();
</script> *@







@* <style>
	#container {
		height: 100vh; /* 100% da altura da janela */
		margin-left: 4.5rem;
		/*background-color: blueviolet;*/
	}
</style> *@



















